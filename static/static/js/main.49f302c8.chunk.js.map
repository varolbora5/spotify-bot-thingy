{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","getToken","ref","a","fetch","method","headers","res","json","re","token","access_token","queueAdd","uri","Authorization","Accept","status","sleep","ms","Promise","resolve","setTimeout","getDevices","devices","id","window","location","reload","getPlaylistID","items","selectDevice","body","JSON","stringify","device_ids","play","getInfo","getURI","track","skipSong","control","name","cookie","load","device","info","Number","progress_ms","useEffect","cont","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.49f302c8.chunk.js","sourcesContent":["import \"./App.css\";\nimport cookie from \"react-cookies\";\nimport {useEffect} from \"react\";\n\nfunction App() {\n  const getCookie = (name) => {\n    return cookie.load(name);\n  };\n\n  const getToken = async (ref) => {\n    const res = await fetch(`http://localhost:5000/ref?ref=${ref}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    });\n    const re = await res.json();\n    const token = await re;\n    return token.access_token;\n  };\n\n  const queueAdd = async (token, uri) => {\n    const res = await fetch(\n      `https://api.spotify.com/v1/me/player/queue?uri=${uri}`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + token,\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n    if (res.status !== 204) {\n      await sleep(500)\n      await queueAdd(token, uri)\n    }\n  };\n\n  const sleep = async (ms) => {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  const getDevices = async (token) => {\n    const res = await fetch(\"https://api.spotify.com/v1/me/player/devices\", {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const json = await res.json();\n    try {\n      return await json.devices[0].id;\n    } catch (e) {\n      window.location.reload();\n    }\n  };\n\n  const getPlaylistID = async (token) => {\n    const res = await fetch(\"https://api.spotify.com/v1/me/playlists?limit=1\", {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const json = await res.json();\n    return json.items[0].id;\n  };\n\n  const selectDevice = async (token, id) => {\n    await fetch(\"https://api.spotify.com/v1/me/player\", {\n      method: \"PUT\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        device_ids: [id],\n        play: false\n      }),\n    });\n  };\n\n  const getInfo = async (token) => {\n    const res = await fetch(`https://api.spotify.com/v1/me/player`, {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    return await res.json();\n  };\n\n  const play = async (token) => {\n    await fetch(`https://api.spotify.com/v1/me/player/play`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n  };\n\n  const getURI = async (token, id) => {\n    const res = await fetch(\n      `https://api.spotify.com/v1/playlists/${id}/tracks?offset=0&limit=1&market=TR`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + token,\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n    const json = await res.json();\n    return json.items[0].track.uri;\n  };\n\n  const skipSong = async (token) => {\n    await fetch(\"https://api.spotify.com/v1/me/player/next\", {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n  };\n\n  const control = async () => {\n    const ref = getCookie(\"sptifycontrolrefreshtoken124452543\");\n    const token = await getToken(ref);\n    const id = await getPlaylistID(token);\n    const uri = await getURI(token, id);\n    await sleep(1000)\n    const device = await getDevices(token);\n    await selectDevice(token, device);\n    await sleep(500)\n    await queueAdd(token, uri);\n    await sleep(500)\n    await queueAdd(token, uri);\n    await sleep(500)\n    await play(token)\n    await skipSong(token)\n    while (true) {\n      await sleep(2000)\n      const info = await getInfo(token);\n      if (Number(info.progress_ms) > 30500) {\n        await queueAdd(token, uri);\n        await skipSong(token);\n      }\n    }\n  };\n\n  useEffect(() => {\n    async function cont() {\n      await control()\n    }\n    cont()\n  });\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <p>Spotify Playback SDK</p>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n\n// error\tThe reason authorization failed, for example: “access_denied”\n// state\tThe value of the state parameter supplied in the request.\n//\n// {\n//    \"access_token\": \"NgA6ZcYI...ixn8bUQ\",\n//    \"token_type\": \"Bearer\",\n//    \"scope\": \"user-read-private user-read-email\",\n//    \"expires_in\": 3600\n// }\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}