{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","getToken","ref","a","fetch","method","headers","res","json","re","token","access_token","queueAdd","uri","Authorization","Accept","status","sleep","ms","Promise","resolve","setTimeout","getDevices","devices","id","window","location","reload","selectDevice","body","JSON","stringify","device_ids","play","getInfo","getURI","items","track","skipSong","control","name","cookie","load","device","info","Number","progress_ms","useEffect","cont","then","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0856ac81.chunk.js","sourcesContent":["import \"./App.css\";\nimport cookie from \"react-cookies\";\nimport {useEffect} from \"react\";\n\nfunction App() {\n  const getCookie = (name) => {\n    return cookie.load(name);\n  };\n\n  const getToken = async (ref) => {\n    const res = await fetch(`http://localhost:5000/ref?ref=${ref}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    });\n    const re = await res.json();\n    const token = await re;\n    return token.access_token;\n  };\n\n  const queueAdd = async (token, uri) => {\n    const res = await fetch(\n      `https://api.spotify.com/v1/me/player/queue?uri=${uri}`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + token,\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n    if (res.status !== 204) {\n      await sleep(500)\n      await queueAdd(token, uri)\n    }\n  };\n\n  const sleep = async (ms) => {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  const getDevices = async (token) => {\n    const res = await fetch(\"https://api.spotify.com/v1/me/player/devices\", {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const json = await res.json();\n    if (await json.devices[0].id === 'null') {\n      window.location.reload()\n    }\n  };\n\n  const selectDevice = async (token, id) => {\n    await fetch(\"https://api.spotify.com/v1/me/player\", {\n      method: \"PUT\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        device_ids: [id],\n        play: false\n      }),\n    });\n  };\n\n  const getInfo = async (token) => {\n    const res = await fetch(`https://api.spotify.com/v1/me/player`, {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    return await res.json();\n  };\n\n  const play = async (token) => {\n    await fetch(`https://api.spotify.com/v1/me/player/play`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n  };\n\n  const getURI = async () => {\n    const res = await fetch(\n      `http://localhost:5000/song`,\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n    const json = await res.json();\n    return json.items[0].track.uri;\n  };\n\n  const skipSong = async (token) => {\n    await fetch(\"https://api.spotify.com/v1/me/player/next\", {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    });\n  };\n\n  const control = async () => {\n    const ref = getCookie(\"sptifycontrolrefreshtoken124452543\");\n    const token = await getToken(ref);\n    const uri = await getURI();\n    await sleep(3000)\n    const device = await getDevices(token);\n    await selectDevice(token, device);\n    await sleep(500)\n    await queueAdd(token, uri);\n    await sleep(500)\n    await play(token)\n    await skipSong(token)\n    while (true) {\n      await sleep(2000)\n      const info = await getInfo(token);\n      if (Number(info.progress_ms) > 30500) {\n        await queueAdd(token, uri);\n        await skipSong(token);\n      }\n    }\n  };\n\n  useEffect(() => {\n    async function cont() {\n      await control()\n    }\n    cont().then(a=>a.json)\n  });\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <p>Spotify Playback SDK</p>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n\n// error\tThe reason authorization failed, for example: “access_denied”\n// state\tThe value of the state parameter supplied in the request.\n//\n// {\n//    \"access_token\": \"NgA6ZcYI...ixn8bUQ\",\n//    \"token_type\": \"Bearer\",\n//    \"scope\": \"user-read-private user-read-email\",\n//    \"expires_in\": 3600\n// }\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}